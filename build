#!/bin/sh
set -xe

FLAGS=" -Wall -Wextra -Wshadow -Wmissing-declarations -pedantic -std=c89"
LIB_SSL="-lssl -lcrypto"

# Build object files
cc $FLAGS -c util.c
cc $FLAGS -c uri.c
# -D_POSIX_C_SOURCE=200112L flag is added because of problem with
# addrinfo struct of getaddrinfo.
cc $FLAGS -D_POSIX_C_SOURCE=200112L -c fetch.c $LIB_SSL

# Compile programs
cc $FLAGS -o gmif gmif.c util.o fetch.o $LIB_SSL
cc $FLAGS -o gmic main.c util.o uri.o fetch.o $LIB_SSL
