#!/bin/sh
set -xe

# -D_POSIX_C_SOURCE=200112L flag is added because of problem with
# addrinfo struct of getaddrinfo.  Solution to problem was taken from
# this disscussion:
# https://bytes.com/topic/c/answers/811663-problems-using-getaddrinfo-friends-using-c99-standard
FLAGS="-D_POSIX_C_SOURCE=200112L -Wall -Wextra -Wshadow -Wmissing-declarations -pedantic -std=c89"
LIBS="-lssl -lcrypto"

cc $FLAGS -o gmif gmif.c util.h gmif.h $LIBS         # build gmif
cc $FLAGS -o gmic main.c util.h gmif.h url.h $LIBS   # build gmic
